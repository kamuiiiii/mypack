(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>l}),require("core-js/modules/es.array.for-each.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/web.dom-collections.for-each.js");const o=require("express");var r=e.n(o);const s=require("path");var n=e.n(s);const c=require("http"),i=require("ws"),l=class{constructor(e,t){this.port=e,this.root=t}start(){const e=r()();e.use(r().static(n().resolve(this.root))),e.get("/",((e,t)=>{t.sendFile("/index.html")}));const t=(0,c.createServer)(e);this.wss=new i.WebSocketServer({server:t}),this.wss.on("connection",(function(e){e.send('{ "type": "info", "text": "websocket connection" }'),console.log("websocket connection"),e.on("close",(function(){console.log("websocket stop")}))})),t.listen(this.port,(()=>{console.log(`Listening on http://localhost:${this.port}`)}))}reload(){this.wss.clients.forEach((e=>{e.readyState===i.WebSocket.OPEN&&e.send('{ "type": "reload" }')}))}update(e){this.wss.clients.forEach((t=>{t.readyState===i.WebSocket.OPEN&&t.send(`{ "type": "change", "id": "${e}" }`)}))}};var a=exports;for(var d in t)a[d]=t[d];t.__esModule&&Object.defineProperty(a,"__esModule",{value:!0})})();